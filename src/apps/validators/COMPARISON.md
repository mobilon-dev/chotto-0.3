# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤

–ë—ã—Å—Ç—Ä–∞—è —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –≤—Å–µ–º –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞–º –≤ —Å–∏—Å—Ç–µ–º–µ.

## üìä –¢–∞–±–ª–∏—Ü–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | –ß–∞—Ç—ã | –°–æ–æ–±—â–µ–Ω–∏—è | Sidebar Items |
|----------------|------|-----------|---------------|
| **–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è** | `validators/chats/` | `validators/messages/` | `validators/sidebar/` |
| **Composable** | `useChatValidator` | `useMessageValidator` | `useSidebarValidator` |
| **–§—É–Ω–∫—Ü–∏—è** | `validateChats` | `validateMessages` | `validateSidebarItems` |
| **–¶–≤–µ—Ç –∫–Ω–æ–ø–∫–∏** | üü¢ –ó–µ–ª–µ–Ω—ã–π | üîµ –°–∏–Ω–∏–π | üü† –û—Ä–∞–Ω–∂–µ–≤—ã–π |
| **–ò–∫–æ–Ω–∫–∞** | ‚úì | ‚úâ | ‚ò∞ |
| **–î–∞–Ω–Ω—ã–µ** | `chatsStore.chats` | `messages` (ref) | `sidebarItems` (ref) |

## üîë –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è

### –ß–∞—Ç—ã
```typescript
{
  chatId: number,           // —É–Ω–∏–∫–∞–ª—å–Ω—ã–π
  name: string,
  countUnread: number,      // >= 0
  lastMessage: string,
  'lastActivity.timestamp': string
}
```

### –°–æ–æ–±—â–µ–Ω–∏—è
```typescript
{
  chatId: number,
  messageId: string | number,  // —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —á–∞—Ç–∞(+–¥–∏–∞–ª–æ–≥–∞)
  type: string,
  timestamp: string | number
  // dialogId - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ!
}
```

### Sidebar Items
```typescript
{
  itemId: string,           // —É–Ω–∏–∫–∞–ª—å–Ω—ã–π
  icon: string,
  notificationCount: number, // >= 0
  selected: boolean
}
```

## üéØ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏

| –í–∞–ª–∏–¥–∞—Ç–æ—Ä | –ü–æ–ª–µ | –û–±–ª–∞—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ |
|-----------|------|------------------|
| –ß–∞—Ç—ã | `chatId` | –ì–ª–æ–±–∞–ª—å–Ω–æ (–≤–µ—Å—å –º–∞—Å—Å–∏–≤) |
| –°–æ–æ–±—â–µ–Ω–∏—è | `messageId` | –í –ø—Ä–µ–¥–µ–ª–∞—Ö `chatId:dialogId` (–∏–ª–∏ —Ç–æ–ª—å–∫–æ `chatId` –µ—Å–ª–∏ dialogId –Ω–µ—Ç) |
| Sidebar | `itemId` | –ì–ª–æ–±–∞–ª—å–Ω–æ (–≤–µ—Å—å –º–∞—Å—Å–∏–≤) |

## üì¶ –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### –ß–∞—Ç—ã
- ‚úÖ `dialogs[]` - –º–∞—Å—Å–∏–≤ –¥–∏–∞–ª–æ–≥–æ–≤
- ‚úÖ `contact.attributes[]` - –∞—Ç—Ä–∏–±—É—Ç—ã –∫–æ–Ω—Ç–∞–∫—Ç–∞
- ‚úÖ `actions[]` - –¥–µ–π—Å—Ç–≤–∏—è —á–∞—Ç–∞

### –°–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ `actions[]` - –¥–µ–π—Å—Ç–≤–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ `reply{}` - –æ—Ç–≤–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ
- ‚úÖ `embed{}` - –≤–ª–æ–∂–µ–Ω–∏–µ (youtube, rutube –∏ —Ç.–¥.)
- ‚úÖ `linkPreview{}` - –ø—Ä–µ–≤—å—é —Å—Å—ã–ª–∫–∏
- ‚úÖ `transcript{}` - —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç
- ‚úÖ `keyboard[]` - –∫–Ω–æ–ø–∫–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

### Sidebar Items
- ‚ùå –ù–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä (–ø–ª–æ—Å–∫–∏–π –æ–±—ä–µ–∫—Ç)

## üé® UI-–∫–Ω–æ–ø–∫–∏ –≤ MobilonExtendedChatApp

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ö–æ–Ω—Ç–∞–∫—Ç                                  ‚îÇ
‚îÇ                      [‚úì] [‚úâ] [‚ò∞] [‚â°]    ‚îÇ
‚îÇ                       ‚Üì   ‚Üì   ‚Üì          ‚îÇ
‚îÇ                    –ß–∞—Ç—ã Msg Sidebar      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞

| –ö–Ω–æ–ø–∫–∞ | –ù–æ—Ä–º–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ | –ü—Ä–∏ hover | –ü—Ä–∏ –æ—à–∏–±–∫–µ |
|--------|---------------------|-----------|------------|
| **–ß–∞—Ç—ã** | üü¢ #4CAF50 | üü¢ #2E7D32 | üî¥ #f44336 |
| **–°–æ–æ–±—â–µ–Ω–∏—è** | üîµ #2196F3 | üîµ #1565C0 | üî¥ #f44336 |
| **Sidebar** | üü† #FF9800 | üü† #E65100 | üî¥ #f44336 |

### –ê–Ω–∏–º–∞—Ü–∏—è

–ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –≤—Å–µ –∫–Ω–æ–ø–∫–∏:
- ‚ö° –ú–µ–Ω—è—é—Ç –∏–∫–æ–Ω–∫—É –Ω–∞ `!`
- üîÑ –ü—É–ª—å—Å–∏—Ä—É—é—Ç (opacity 1 ‚Üí 0.6 ‚Üí 1)
- üî¥ –°—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∫—Ä–∞—Å–Ω—ã–º–∏

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

| –í–∞–ª–∏–¥–∞—Ç–æ—Ä | –î–æ–∫—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------|----------|
| **–ß–∞—Ç—ã** | [README.md](./README.md) | –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |
| **–°–æ–æ–±—â–µ–Ω–∏—è** | [MESSAGE_VALIDATOR_README.md](./MESSAGE_VALIDATOR_README.md) | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π |
| **Sidebar** | [sidebar/README.md](./sidebar/README.md) | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è sidebar |
| **–í—Å–µ** | [SUMMARY.md](./SUMMARY.md) | –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ |
| **–í—Å–µ** | [INTEGRATION.md](./INTEGRATION.md) | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã |
| **–í—Å–µ** | [STRUCTURE.md](./STRUCTURE.md) | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –∏–º–ø–æ—Ä—Ç—ã |
| **–í—Å–µ** | [COMPARISON.md](./COMPARISON.md) | –≠—Ç–æ—Ç —Ñ–∞–π–ª (—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ) |

## üöÄ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –í—Å–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

```vue
<script setup>
import { computed, ref } from 'vue';
import { 
  useChatValidator, 
  useMessageValidator,
  useSidebarValidator 
} from '@/apps/validators';

const chatsData = computed(() => chatsStore.chats);
const messagesData = ref(messages);
const sidebarData = ref(sidebarItems);

const chatsVal = useChatValidator(chatsData, { autoValidate: true, debounce: 300 });
const messagesVal = useMessageValidator(messagesData, { autoValidate: true, debounce: 300 });
const sidebarVal = useSidebarValidator(sidebarData, { autoValidate: true, debounce: 300 });

// –û–±—â–∞—è –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å
const allValid = computed(() => 
  chatsVal.isValid.value && 
  messagesVal.isValid.value && 
  sidebarVal.isValid.value
);

// –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –æ—Ç—á–µ—Ç—ã
function showAllReports() {
  chatsVal.showReport();
  messagesVal.showReport();
  sidebarVal.showReport();
}
</script>

<template>
  <div :class="{ 'has-errors': !allValid }">
    <button @click="showAllReports">
      –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –æ—Ç—á–µ—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
    </button>
  </div>
</template>
```

### –í—ã–±–æ—Ä–æ—á–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è

```typescript
// –¢–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã
import { useChatValidator } from '@/apps/validators/chats';
import { useSidebarValidator } from '@/apps/validators/sidebar';

// –°–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –≤–∞–ª–∏–¥–∏—Ä—É–µ–º
const chatsVal = useChatValidator(chatsData);
const sidebarVal = useSidebarValidator(sidebarData);
```

## üí° –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫–æ–π –≤–∞–ª–∏–¥–∞—Ç–æ—Ä

| –°–∏—Ç—É–∞—Ü–∏—è | –í–∞–ª–∏–¥–∞—Ç–æ—Ä |
|----------|-----------|
| –†–∞–±–æ—Ç–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤/—á–∞—Ç–æ–≤ | –ß–∞—Ç—ã |
| –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π | –°–æ–æ–±—â–µ–Ω–∏—è |
| –†–∞–±–æ—Ç–∞ —Å –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª—å—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ | Sidebar |
| –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ä–≤–µ—Ä–∞ | –í—Å–µ —Ç—Ä–∏ |
| –ü–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö | –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π |
| –ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –Ω–æ–≤—ã—Ö —Ñ–∏—á | –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π |

## üîß –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

–í—Å–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

| –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------|----------|
| **Debounce** | 300–º—Å –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π |
| **Deep watch** | –¢–æ–ª—å–∫–æ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö |
| **Computed** | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è |
| **Lazy** | –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö |

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## üéì –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –í development —Ä–µ–∂–∏–º–µ

```typescript
// ‚úÖ –•–û–†–û–®–û - –í–∫–ª—é—á–∏—Ç—å –≤—Å–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã
const { showReport } = useChatValidator(data, { 
  autoValidate: true, 
  debounce: 300 
});
```

### –í production —Ä–µ–∂–∏–º–µ

```typescript
// ‚ö†Ô∏è –í–ê–†–ò–ê–ù–¢ 1 - –û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–≤–∞–ª–∏–¥–∞—Ü–∏—é
const { validate, showReport } = useChatValidator(data, { 
  autoValidate: false 
});

// –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
validate();

// ‚ö†Ô∏è –í–ê–†–ò–ê–ù–¢ 2 - –¢–æ–ª—å–∫–æ –≤ dev
const { showReport } = useChatValidator(data, { 
  autoValidate: import.meta.env.DEV,
  debounce: 300 
});
```

### –ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –¥–∞–Ω–Ω—ã—Ö

```typescript
// ‚úÖ –•–û–†–û–®–û - –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
async function loadData() {
  const data = await api.getChats();
  
  const result = validateChats(data);
  if (!result.isValid) {
    console.error('–ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞!', result.errors);
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
    return;
  }
  
  chatsStore.chats = data;
}
```

## üìã –ß–µ–∫-–ª–∏—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞:

- [ ] –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤ `validators/`
- [ ] –°–æ–∑–¥–∞—Ç—å `types.ts` —Å TypeScript —Ç–∏–ø–∞–º–∏
- [ ] –°–æ–∑–¥–∞—Ç—å `validator.ts` —Å –ª–æ–≥–∏–∫–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- [ ] –°–æ–∑–¥–∞—Ç—å `useValidator.ts` —Å Vue composable
- [ ] –°–æ–∑–¥–∞—Ç—å `index.ts` —Å —ç–∫—Å–ø–æ—Ä—Ç–∞–º–∏
- [ ] –°–æ–∑–¥–∞—Ç—å `README.md` —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç –≤ –≥–ª–∞–≤–Ω—ã–π `validators/index.ts`
- [ ] –î–æ–±–∞–≤–∏—Ç—å UI-–∫–Ω–æ–ø–∫—É –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `SUMMARY.md`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `INTEGRATION.md`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `STRUCTURE.md`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `COMPARISON.md`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–∏–Ω—Ç–µ—Ä
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É


